{% extends "user/base.html" %}

{% block title %}Temple Pooja Timings - Sri Veeranjaneya Swamy Temple{% endblock %}

{% block content %}
<div class="pooja-timings-container">
    <div class="pooja-header">
        <h1 class="pooja-title">Temple Pooja Timings</h1>
        <p class="pooja-subtitle">Daily schedule of poojas and rituals at Shri Veeranjaneya Swamy Temple</p>
    </div>
    
    <div class="time-display-container">
        <h3 class="time-display-title">Current Time</h3>
        <div class="time-display" id="currentTime">
            <span id="hours">--</span>
            <span class="time-separator">:</span>
            <span id="minutes">--</span>
            <span class="time-separator">:</span>
            <span id="seconds">--</span>
            <span id="period" class="period">--</span>
        </div>
        <p class="time-zone">All times are in IST (Indian Standard Time)</p>
    </div>
    
    <div class="filter-container">
        <div class="search-box">
            <input type="text" id="poojaSearch" placeholder="Search for pooja...">
        </div>
        <div class="day-filter">
            <select id="dayFilter">
                <option value="sun-fri">Sunday to Friday</option>
                <option value="sat">Saturday</option>
            </select>
        </div>
    </div>
    
    <!-- Removed status indicators -->
    <div class="pooja-schedule-container">
        <h2 class="schedule-title">Daily Pooja Schedule</h2>
        <table class="pooja-schedule-table" id="poojaTable">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Pooja Name</th>
                    <th>Description</th>
                    <th>Days</th>
                </tr>
            </thead>
            <tbody>
                <!-- Sunday to Friday schedule -->
                <tr data-time="06:30" class="pooja-row" data-days="sun-fri">
                    <td>6:30 AM</td>
                    <td>Temple Opening</td>
                    <td>Temple opens for devotees</td>
                    <td><span class="days-badge">Sunday to Friday</span></td>
                </tr>
                <tr data-time="07:30" class="pooja-row" data-days="sun-fri">
                    <td>7:30 AM</td>
                    <td>Abhisheka</td>
                    <td>Sacred ritual bath for deity</td>
                    <td><span class="days-badge">Sunday to Friday</span></td>
                </tr>
                <tr data-time="10:00" class="pooja-row" data-days="sun-fri">
                    <td>10:00 AM</td>
                    <td>Arathi</td>
                    <td>Morning Arathi performed</td>
                    <td><span class="days-badge">Sunday to Friday</span></td>
                </tr>
                <tr data-time="11:30" class="pooja-row" data-days="sun-fri">
                    <td>11:30 AM</td>
                    <td>Temple Closing</td>
                    <td>Temple closed for midday</td>
                    <td><span class="days-badge">Sunday to Friday</span></td>
                </tr>
                <tr data-time="17:30" class="pooja-row" data-days="sun-fri">
                    <td>5:30 PM</td>
                    <td>Temple Reopens</td>
                    <td>Evening darshan starts</td>
                    <td><span class="days-badge">Sunday to Friday</span></td>
                </tr>
                <tr data-time="20:30" class="pooja-row" data-days="sun-fri">
                    <td>8:30 PM</td>
                    <td>Arathi & Close</td>
                    <td>Final arathi and temple closing</td>
                    <td><span class="days-badge">Sunday to Friday</span></td>
                </tr>
                <!-- Saturday schedule -->
                <tr data-time="06:00" class="pooja-row" data-days="sat">
                    <td>6:00 AM</td>
                    <td>Temple Opening</td>
                    <td>Temple opens early</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="07:30" class="pooja-row" data-days="sat">
                    <td>7:30 AM</td>
                    <td>Abhisheka</td>
                    <td>Sacred bath ritual</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="09:00" class="pooja-row" data-days="sat">
                    <td>9:00 AM</td>
                    <td>Arathi</td>
                    <td>Morning Arathi</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="10:00" class="pooja-row" data-days="sat">
                    <td>10:00 AM</td>
                    <td>Vadamala Seva</td>
                    <td>Special offering of Vadamala to deity</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="11:30" class="pooja-row" data-days="sat">
                    <td>11:30 AM</td>
                    <td>Vadamala Ends</td>
                    <td>Seva concludes</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="12:00" class="pooja-row" data-days="sat">
                    <td>12:00 PM</td>
                    <td>Temple Closing</td>
                    <td>Midday closure</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="17:30" class="pooja-row" data-days="sat">
                    <td>5:30 PM</td>
                    <td>Temple Reopens</td>
                    <td>Evening darshan starts</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="18:30" class="pooja-row" data-days="sat">
                    <td>6:30 PM</td>
                    <td>Maha Pooja</td>
                    <td>Grand evening pooja</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="18:45" class="pooja-row" data-days="sat">
                    <td>6:45 PM</td>
                    <td>Prasada</td>
                    <td>Distribution of holy offering</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="21:00" class="pooja-row" data-days="sat">
                    <td>9:00 PM</td>
                    <td>Final Arathi</td>
                    <td>Last pooja of the day</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
                <tr data-time="21:15" class="pooja-row" data-days="sat">
                    <td>9:15 PM</td>
                    <td>Temple Closing</td>
                    <td>Temple closes for the day</td>
                    <td><span class="days-badge">Saturday</span></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<style>
    .pooja-timings-container {
        max-width: 1200px;
        margin: 30px auto;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    .pooja-header {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .pooja-title {
        color: #241468;
        font-size: 32px;
        margin-bottom: 5px;
    }
    
    .pooja-subtitle {
        color: #666;
        font-size: 16px;
    }
    
    .time-display-container {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        padding: 25px;
        text-align: center;
        max-width: 500px;
        margin: 0 auto 30px;
    }
    
    .time-display-title {
        color: #007bff;
        margin-bottom: 15px;
        font-weight: 500;
    }
    
    .time-display {
        font-size: 42px;
        font-weight: 700;
        color: #333;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .time-separator {
        margin: 0 5px;
    }
    
    .period {
        font-size: 20px;
        margin-left: 15px;
        align-self: flex-end;
        margin-bottom: 10px;
    }
    
    .time-zone {
        color: #777;
        font-size: 14px;
        margin-top: 15px;
    }
    
    .filter-container {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }
    
    .search-box input {
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 4px;
        width: 300px;
        font-size: 14px;
    }
    
    .day-filter select {
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        width: 150px;
    }
    
    .schedule-title {
        background-color: #007bff;
        color: white;
        padding: 12px 20px;
        border-radius: 4px 4px 0 0;
        margin: 0;
        font-size: 18px;
    }
    
    .pooja-schedule-table {
        width: 100%;
        border-collapse: collapse;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        background-color: white;
    }
    
    .pooja-schedule-table th, 
    .pooja-schedule-table td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #eee;
    }
    
    .pooja-schedule-table th {
        background-color: #f8f9fa;
        font-weight: 600;
        color: #444;
    }
    
    .days-badge {
        background-color: #e9ecef;
        color: #333;
        padding: 5px 8px;
        border-radius: 4px;
        font-size: 12px;
        display: inline-block;
    }
    
    @media (max-width: 768px) {
        .filter-container {
            flex-direction: column;
            gap: 10px;
        }
        
        .search-box input,
        .day-filter select {
            width: 100%;
        }
        
        .pooja-schedule-table {
            display: block;
            overflow-x: auto;
        }
    }
</style>

<script>
    // Update the clock
    function updateClock() {
        const now = new Date();
        let hours = now.getHours();
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const seconds = now.getSeconds().toString().padStart(2, '0');
        const period = hours >= 12 ? 'PM' : 'AM';
        
        // Convert to 12-hour format
        hours = hours % 12;
        hours = hours ? hours : 12; // If 0, set to 12
        
        document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
        document.getElementById('minutes').textContent = minutes;
        document.getElementById('seconds').textContent = seconds;
        document.getElementById('period').textContent = period;
        
        // Update pooja status based on current time
        // updatePoojaStatus(); // Removed as per edit hint
    }
    
    // Remove updatePoojaStatus and all status-badge logic
    // Search functionality
    document.getElementById('poojaSearch').addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const rows = document.querySelectorAll('.pooja-row');
        
        rows.forEach(row => {
            const poojaName = row.querySelector('td:nth-child(2)').textContent.toLowerCase();
            const description = row.querySelector('td:nth-child(3)').textContent.toLowerCase();
            
            if (poojaName.includes(searchTerm) || description.includes(searchTerm)) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    });
    
    // Day filter functionality
    document.getElementById('dayFilter').addEventListener('change', function() {
        const selectedDay = this.value;
        const rows = document.querySelectorAll('.pooja-row');
        rows.forEach(row => {
            if (row.getAttribute('data-days') === selectedDay) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    });
    // Set default filter to 'Sunday to Friday' on page load
    document.getElementById('dayFilter').value = 'sun-fri';
    // Trigger the filter logic once on page load
    (function() {
        const selectedDay = document.getElementById('dayFilter').value;
        const rows = document.querySelectorAll('.pooja-row');
        rows.forEach(row => {
            if (row.getAttribute('data-days') === selectedDay) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    })();
    
    // Initialize the clock and update every second
    updateClock();
    setInterval(updateClock, 1000);
</script>
{% endblock %}
